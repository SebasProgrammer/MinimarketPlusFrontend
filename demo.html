<!DOCTYPE html>
<html>

<head>
    <title>Demo TP1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js"
        integrity="sha512-90vH1Z83AJY9DmlWa8WkjkV79yfS2n2Oxhsi2dZbIv0nC4E6m5AbH8Nh156kkM7JePmqD6tcZsfad1ueoaovww=="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/async/3.2.0/async.min.js"
        integrity="sha512-6K6+H87tLdCWvY5ml9ZQXLRlPlDEt8uXmtELhuJRgFyEDv6JvndWHg3jadJuBVGPEhhA2AAt+ROMC2V7EvTIWw=="
        crossorigin="anonymous"></script>
    <script src="https://cdn.roboflow.com/0.2.26/roboflow.js"></script>
    <link rel="stylesheet" href="./main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css" rel="stylesheet">
</head>

<body class="loading">

<script>
    // Función para obtener una cookie por su nombre
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

    // Verificar si la cookie 'loggedIn' existe
    if (!getCookie('loggedIn')) {
        // Si la cookie no está presente, redirigir a login.html
        window.location.href = 'login.html';
    }
</script>

<video id="video" autoplay muted playsinline></video>
<div id="fps"></div>

<div id="leftSidebar">
    <h2>Cámaras Disponibles</h2>
    <select id="cameraDropdown">
        <!-- Opciones de las cámaras serán agregadas dinámicamente -->
    </select>
    <br>

    <div class="select-container">
        <label for="cameraSelectBox">Seleccionar Camara</label>
        
        <select id="cameraSelectBox">
            <option value="on" selected>Camara Prendida</option>
            <option value="off">Camara Apagada</option>
        </select>
    </div>
</div>

<!-- Sidebar HTML -->
<div id="rightSidebar">
    <div id="logoutIcon" class="logout-icon">
        <i class="fas fa-sign-out-alt"></i>
    </div>
    <br>
    <h2>Productos Detectados</h2>
    <ul id="productList"></ul>
    <div id="totalPrice">Precio Total: $0.00</div>
    <div id="payButtonContainer">
        <button id="payButton">Pagar</button>
    </div>
    <div id="paymentConfirmation" style="display: none;">
        <img src="./yape.jpeg" alt="Confirmación de Pago" id="confirmationImage" />
        <button id="backToStreamButton" title="Volver">
            <i class='bx bx-arrow-back' style='color:#000000'  ></i>        
        </button>
    </div>    
</div>

<script src="./main.js"></script>

<script>
    function deleteCookie(name) {
        document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
    }

    document.getElementById('logoutIcon').addEventListener('click', function() {
        // Eliminar la cookie 'loggedIn'
        deleteCookie('loggedIn');
        // Redirigir a login.html
        window.location.href = 'demo.html';
    });
    
</script>

</body>
</html>
